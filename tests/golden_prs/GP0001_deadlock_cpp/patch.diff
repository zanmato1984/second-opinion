diff --git a/src/engine/worker.cpp b/src/engine/worker.cpp
index 1111111..2222222 100644
--- a/src/engine/worker.cpp
+++ b/src/engine/worker.cpp
@@ -42,6 +42,12 @@ void Worker::run() {
   do_work();
+  muA.lock();
+  muB.lock();
+  critical_update();
+  muB.unlock();
+  muA.unlock();
   finalize();
 }
